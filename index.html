<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Professional Portfolio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#home">MyPortfolio</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="#services">Services</a></li>
                    <li class="nav-item"><a class="nav-link" href="#works">My Works</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
                </ul>
                <span class="navbar-text ms-3 text-muted small">
                    üí¨ AI Assistant available (bottom-right)
                </span>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section text-center py-5">
        <div class="container">
            <h1 class="display-4 fw-bold">Hi, I'm Rolly Alonso</h1>
            <p class="lead text-muted">Full Stack Developer | Designer | Problem Solver</p>
            <a href="#services" class="btn btn-primary btn-lg">Explore My Work</a>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-5 bg-light">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <img src="./images/p1.jpg" alt="Profile" class="img-fluid rounded-circle">
                </div>
                <div class="col-md-6">
                    <h2>About Me</h2>
                    <p>I'm a passionate BSIT Graduate from University of Cebu with expertise in web development, database management, and software solutions. I love creating elegant solutions to complex problems and delivering high-quality applications.</p>
                    <p><strong>Skills & Technologies:</strong></p>
                    <div class="skills-container">
                        <span class="skill-pill">HTML5</span>
                        <span class="skill-pill">CSS3</span>
                        <span class="skill-pill">JavaScript</span>
                        <span class="skill-pill">React.js</span>
                        <span class="skill-pill">Node.js</span>
                        <span class="skill-pill">Python</span>
                        <span class="skill-pill">PHP</span>
                        <span class="skill-pill">MySQL</span>
                        <span class="skill-pill">MongoDB</span>
                        <span class="skill-pill">Git</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="py-5">
        <div class="container">
            <h2 class="text-center mb-5">Services I Offer</h2>
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="card shadow-sm h-100">
                        <div class="card-body text-center">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üíª</div>
                            <h5 class="card-title">Web Development</h5>
                            <p class="card-text">Creating responsive and modern websites using latest technologies including React, Node.js, and modern frameworks.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card shadow-sm h-100">
                        <div class="card-body text-center">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üé®</div>
                            <h5 class="card-title">UI/UX Design</h5>
                            <p class="card-text">Designing beautiful and intuitive user interfaces that provide excellent user experience and engagement.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card shadow-sm h-100">
                        <div class="card-body text-center">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üóÑÔ∏è</div>
                            <h5 class="card-title">Database Management</h5>
                            <p class="card-text">Expert database design, optimization, and management for MySQL and MongoDB systems.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Works Section -->
    <section id="works" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-5">My Works</h2>
            <div class="row">
                <div class="col-md-6 mb-4">
                    <div class="card">
                        <img src="/images/KEEPSAKE.png" class="card-img-top" alt="Project 1">
                        <div class="card-body">
                            <h5 class="card-title">Project 1: Keepsake</h5>
                            <p class="card-text">A digital platform to store, track, and share your baby's health records and milestones with ease..</p>
                            <a href="https://keepsake-pi.vercel.app/" target="_blank" class="btn btn-outline-primary btn-sm">View Project</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="card">
                        <img src="/images/employee.png" class="card-img-top" alt="Project 2">
                        <div class="card-body">
                            <h5 class="card-title">Project 2: Employee Management System</h5>
                            <p class="card-text">A System for Efficient Employee Mangement.</p>
                            <a href="https://ipt-final-2025-alonso.onrender.com/" target="_blank" class="btn btn-outline-primary btn-sm">View Project</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Chatbot Section - Now using Flowise floating widget -->
    <!-- The chatbot will appear as a floating button in the bottom-right corner -->
    <!-- No section needed - it's handled by the Flowise embed script below -->

    <!-- Contact Section -->
    <section id="contact" class="py-5 bg-dark text-white">
        <div class="container text-center">
            <h2>Get In Touch</h2>
            <p>Feel free to reach out to me for any inquiries!</p>
            <p><strong>Email:</strong> rollyalonso88@gmail.com</p>
            <p><strong>Phone:</strong> 09998873858</p>
            <div class="social-links">
                <a href="#" class="btn btn-outline-light btn-sm mx-2">LinkedIn</a>
                <a href="#" class="btn btn-outline-light btn-sm mx-2">GitHub</a>
                <a href="https://www.facebook.com/ROLLyALOnSOXD/" target="_blank" class="btn btn-outline-light btn-sm mx-2">facebook</a>
            </div>
        </div>
    </section>

    <footer class="bg-dark text-white text-center py-3">
        <p>&copy; 2025 My Portfolio. All rights reserved.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Environment Detection -->
    <script>
        // Auto-detect environment for debugging and configuration
        const environment = {
            isProduction: window.location.hostname !== 'localhost' &&
                          window.location.hostname !== '127.0.0.1',
            isDevelopment: window.location.hostname === 'localhost' ||
                           window.location.hostname === '127.0.0.1',
            isNetlify: window.location.hostname.includes('netlify.app')
        };

        // Store for other scripts to use
        window.portfolioEnvironment = environment;

        // Log environment in development
        if (environment.isDevelopment) {
            console.log('Environment:', environment);
        }
    </script>

    <!-- Flowise Loading State Handler -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Add loading state CSS
            const style = document.createElement('style');
            style.textContent = `
                .chatbot-loading {
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    width: 60px;
                    height: 60px;
                    background: linear-gradient(135deg, #6366f1 0%, #ec4899 100%);
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 9998;
                    box-shadow: 0 4px 16px rgba(99, 102, 241, 0.4);
                    opacity: 1;
                    transition: opacity 0.3s ease;
                }

                .chatbot-loading.hidden {
                    opacity: 0;
                    pointer-events: none;
                }

                .chatbot-loading-spinner {
                    width: 30px;
                    height: 30px;
                    border: 3px solid rgba(255, 255, 255, 0.3);
                    border-radius: 50%;
                    border-top-color: white;
                    animation: chatbot-spin 1s ease-in-out infinite;
                }

                @keyframes chatbot-spin {
                    to { transform: rotate(360deg); }
                }

                .chatbot-error-message {
                    position: fixed;
                    bottom: 90px;
                    right: 20px;
                    background: #ef4444;
                    color: white;
                    padding: 12px 20px;
                    border-radius: 8px;
                    font-size: 14px;
                    max-width: 300px;
                    z-index: 9999;
                    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
                    display: none;
                }

                .chatbot-error-message.show {
                    display: block;
                    animation: slideInUp 0.3s ease;
                }

                @keyframes slideInUp {
                    from {
                        transform: translateY(20px);
                        opacity: 0;
                    }
                    to {
                        transform: translateY(0);
                        opacity: 1;
                    }
                }
            `;
            document.head.appendChild(style);

            // Create loading indicator
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'chatbot-loading';
            loadingDiv.innerHTML = '<div class="chatbot-loading-spinner"></div>';
            loadingDiv.setAttribute('aria-label', 'Loading chatbot');
            document.body.appendChild(loadingDiv);

            // Create error message container
            const errorDiv = document.createElement('div');
            errorDiv.className = 'chatbot-error-message';
            errorDiv.setAttribute('role', 'alert');
            document.body.appendChild(errorDiv);

            // Hide loading indicator after chatbot loads
            setTimeout(function() {
                const chatbotButton = document.querySelector('flowise-chatbot') ||
                                     document.querySelector('[id*="chatbot"]');

                if (chatbotButton || window.Chatbot) {
                    // Chatbot loaded successfully
                    loadingDiv.classList.add('hidden');
                    setTimeout(() => loadingDiv.remove(), 300);
                } else {
                    // Chatbot failed to load
                    loadingDiv.classList.add('hidden');
                    errorDiv.textContent = 'Chat temporarily unavailable. Please email rollyalonso88@gmail.com';
                    errorDiv.classList.add('show');

                    // Hide error after 10 seconds
                    setTimeout(() => {
                        errorDiv.classList.remove('show');
                    }, 10000);
                }
            }, 3000); // Wait 3 seconds for chatbot to initialize
        });
    </script>

    <!-- Flowise Chatbot Integration -->
    <script type="module">
        import Chatbot from 'https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js';

        // Initialize chatbot with error handling
        try {
            Chatbot.init({
                chatflowid: '82f0b30c-3695-47dd-b487-a1e03fc70986',
                apiHost: 'https://cloud.flowiseai.com',

                theme: {
                    button: {
                        backgroundColor: '#6366f1',  // Primary indigo color
                        right: 20,
                        bottom: 20,
                        size: 'medium',
                        iconColor: 'white',
                    },

                    chatWindow: {
                        welcomeMessage: "Hi! I'm Rolly's AI assistant. Ask me about his skills, projects, or services!",
                        backgroundColor: '#ffffff',
                        height: 600,
                        width: 400,
                        fontSize: 16,

                        botMessage: {
                            backgroundColor: '#f7f8ff',  // Very light indigo
                            textColor: '#303235',
                        },

                        userMessage: {
                            backgroundColor: '#6366f1',  // Primary color
                            textColor: '#ffffff',
                        },

                        textInput: {
                            placeholder: 'Type your message...',
                            backgroundColor: '#ffffff',
                            textColor: '#303235',
                            sendButtonColor: '#6366f1',  // Primary color
                        },
                        footer: {
                    textColor: '#303235',
                    text: 'Powered by',
                    company: 'Rolly Alonso',
                    companyLink: 'https://flowiseai.com'
                }
                    }
                }
            });

            console.log('Flowise chatbot initialized successfully');
        } catch (error) {
            console.error('Failed to initialize Flowise chatbot:', error);
            if (window.handleChatbotError) {
                window.handleChatbotError(error, 'Initialization failed');
            }
        }
    </script>

    <!-- Chatbot Analytics & Error Monitoring -->
    <script>
        (function() {
            // Configuration
            const config = {
                enableAnalytics: true,
                enableErrorLogging: true,
                analyticsEndpoint: null, // Set to your analytics endpoint if available
                fallbackEmail: 'rollyalonso88@gmail.com',
                fallbackPhone: '09998873858'
            };

            // Analytics tracking
            window.trackChatbotEvent = function(eventName, eventData = {}) {
                if (!config.enableAnalytics) return;

                const event = {
                    timestamp: new Date().toISOString(),
                    event: eventName,
                    data: eventData,
                    userAgent: navigator.userAgent,
                    url: window.location.href
                };

                // Log to console in development
                if (window.portfolioEnvironment?.isDevelopment) {
                    console.log('[Chatbot Analytics]', event);
                }

                // Send to analytics endpoint if configured
                if (config.analyticsEndpoint) {
                    fetch(config.analyticsEndpoint, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(event)
                    }).catch(err => console.warn('Analytics tracking failed:', err));
                }

                // Google Analytics integration (if GA is installed)
                if (typeof gtag === 'function') {
                    gtag('event', eventName, {
                        event_category: 'Chatbot',
                        event_label: eventData.label || '',
                        value: eventData.value || 0
                    });
                }
            };

            // Error handler
            window.handleChatbotError = function(error, context = '') {
                if (!config.enableErrorLogging) return;

                console.error('[Chatbot Error]', context, error);

                // Track error event
                trackChatbotEvent('chatbot_error', {
                    label: context,
                    error: error.message || String(error)
                });

                // Show user-friendly error message
                const errorDiv = document.querySelector('.chatbot-error-message');
                if (errorDiv) {
                    errorDiv.textContent = `AI Assistant temporarily unavailable. Contact me: ${config.fallbackEmail}`;
                    errorDiv.classList.add('show');

                    setTimeout(() => errorDiv.classList.remove('show'), 10000);
                }
            };

            // Monitor chatbot initialization
            let initCheckInterval = setInterval(function() {
                if (window.Chatbot || document.querySelector('flowise-chatbot')) {
                    clearInterval(initCheckInterval);
                    trackChatbotEvent('chatbot_loaded', { label: 'success' });
                }
            }, 500);

            // Timeout check (30 seconds)
            setTimeout(function() {
                clearInterval(initCheckInterval);
                if (!window.Chatbot && !document.querySelector('flowise-chatbot')) {
                    handleChatbotError(new Error('Initialization timeout'), 'Chatbot failed to load within 30 seconds');
                    trackChatbotEvent('chatbot_load_timeout', { label: 'failure' });
                }
            }, 30000);

            // Track button clicks
            document.addEventListener('click', function(e) {
                const target = e.target.closest('flowise-chatbot button, .flowise-chatbot-button');
                if (target) {
                    trackChatbotEvent('chatbot_button_click', { label: 'open_chat' });
                }
            });

            // Monitor network connectivity
            window.addEventListener('online', function() {
                trackChatbotEvent('network_status', { label: 'online' });
            });

            window.addEventListener('offline', function() {
                trackChatbotEvent('network_status', { label: 'offline' });
                handleChatbotError(new Error('Network offline'), 'No internet connection');
            });

        })();
    </script>
</body>
</html>
